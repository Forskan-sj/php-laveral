(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5708"],{"/yXQ":function(e,t,i){"use strict";var s=i("gDS+"),a=i.n(s),r={name:"UpLoad",props:{index:{required:!0,type:Number},type:{required:!0,type:Number},filelists:{required:!1,type:Array,default:function(){return[]}},singlePic:{required:!1,type:String,default:null},ossparas:{required:!0,type:Object}},data:function(){return{btnText:"点击上传",dialogImageUrl:"",alignSelf:{margin:"83px 0 0 30px"},dialogVisible:!1,fileStorage:[],ossKey:{},mediaDuration:-1,resLoaded:!1,showV:!1,vsource:"",imageUrl:"",fileType:["audio/mp3","video/mp4","image/jpeg,image/png","image/jpeg,image/png"]}},computed:{},updated:function(){if(this.resLoaded){this.resLoaded=!1;var e=document.getElementById("video-active"+this.index),t=this;e.onloadedmetadata=function(){t.$emit("uploadSucess",{mediaDuration:e.duration,index:t.index,type:t.type,res_url:null})}}},mounted:function(){this.ossKey=JSON.parse(a()(this.ossparas)),3===this.type&&null!=this.singlePic&&(this.imageUrl=this.singlePic,this.btnText="替换"),1!==this.type&&0!==this.type||null===this.singlePic||(this.vsource=this.singlePic,this.showV=!0,this.resLoaded=!0,this.btnText="替换")},methods:{handleRemove:function(e,t){var i=this,s=[];t.forEach(function(e,t,a){s.push(i.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1])}),this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:s})},handleAvatarSuccess:function(e,t,i){var s=this;if(console.log(t,i),this.$refs.upload.submit(),this.fileStorage=i,2!==this.type){this.btnText="替换",this.fileStorage=[t];var a=this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1];this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:a})}if(3===this.type&&(this.imageUrl=this.ossparas.host+"/"+this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1]),2!==this.type&&3!==this.type&&(this.showV=!0,this.resLoaded=!0),2===this.type){var r=!0,o=[];i.forEach(function(e,t,i){"success"===e.status?o.push(s.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1]):(r=!1,o=[])}),r&&this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:o})}},beforeAvatarUpload:function(e){2!==this.type&&(this.showV=!1);var t=this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1];this.ossKey.key=t,this.vsource=this.ossparas.host+"/"+this.ossKey.key},handlePictureCardPreview:function(e){this.dialogImageUrl=1===e?this.imageUrl:e.url,this.dialogVisible=!0}}},o=(i("OXd6"),i("Z36Z"),i("KHd+")),n=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dndList"},[e.imageUrl?i("img",{staticClass:"avatar",staticStyle:{float:"left"},attrs:{src:e.imageUrl},on:{click:function(t){e.handlePictureCardPreview(1)}}}):e._e(),e._v(" "),e.showV?i("video",{staticClass:"video-active",attrs:{id:"video-active"+e.index,width:"320",height:"200",controls:"controls"}},[i("source",{attrs:{src:e.vsource,type:"video/mp4"}})]):e._e(),e._v(" "),i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"show-file-list":2==e.type,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,data:e.ossKey,multiple:2==e.type,accept:e.fileType[e.type],action:e.ossparas.host,"file-list":e.filelists,"list-type":2==e.type?"picture-card":""}},[2==e.type?i("i",{staticClass:"el-icon-plus"}):e._e(),e._v(" "),2!==e.type?i("el-button",{style:3!=e.type||null==e.singlePic&&!e.imageUrl?"":e.alignSelf,attrs:{size:"small",type:"success"},domProps:{textContent:e._s(e.btnText)}}):e._e()],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,"0a979296",null);n.options.__file="index.vue";t.a=n.exports},CiHR:function(e,t,i){"use strict";i.r(t);var s=i("gDS+"),a=i.n(s),r=i("/yXQ"),o=i("UMyc"),n={name:"VersionEdit",components:{UpLoad:r.a},data:function(){return{path:"Version",bookkinds:[],bEdit:!1,listLoading:!1,cdn:"https://cdncollege.quansuwangluo.com/",form:{type:1,bugly:"",is_update:1,update_content:"",version_name:"",version_num:""},formRules:{version_name:[{required:!0,message:"请输入版本名称",trigger:"blur"}],version_num:[{required:!0,message:"请输入版本号",trigger:"blur"}],size:[{required:!0,message:"请输入安装包大小",trigger:"blur"}],update_content:[{required:!0,message:"请输入更新内容",trigger:"blur"}]}}},mounted:function(){this.bEdit="0"!==this.$route.params.id,this.bEdit&&this.getInfos(this.$route.params.id),this.listLoading=!0},methods:{getInfos:function(e){var t=this;this.listLoading=!0,Object(o.g)(this.path,{id:e}).then(function(e){t.form=e.data.datas,console.log(e),t.listLoading=!1})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.listLoading=!0,Object(o.a)(e.path,e.form).then(function(t){e.$message(t.data.info),e.listLoading=!1,e.$store.dispatch("delView",e.$route),e.$router.replace("/version/index"),sessionStorage.setItem("refresh",a()(1))})})},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},l=(i("LWAO"),i("KHd+")),u=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"260px"}},[i("el-form-item",{attrs:{label:"版本名称:",prop:"version_name"}},[i("el-input",{model:{value:e.form.version_name,callback:function(t){e.$set(e.form,"version_name",t)},expression:"form.version_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"版本号:",prop:"version_num"}},[i("el-input",{model:{value:e.form.version_num,callback:function(t){e.$set(e.form,"version_num",t)},expression:"form.version_num"}})],1),e._v(" "),i("el-form-item",{attrs:{width:"300px",label:"安装包大小:",prop:"size"}},[i("el-input",{staticStyle:{width:"100px","margin-right":"1px"},model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}}),e._v("M\n    ")],1),e._v(" "),i("el-form-item",{attrs:{rules:{required:!0,message:"更新内容不能为空",trigger:"blur"},label:"更新内容",prop:"update_content"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.form.update_content,callback:function(t){e.$set(e.form,"update_content",t)},expression:"form.update_content"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类别:",prop:"type"}},[i("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-radio",{attrs:{label:1}},[e._v("android")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("IOS")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"是否强制更新:",prop:"is_update"}},[i("el-radio-group",{model:{value:e.form.is_update,callback:function(t){e.$set(e.form,"is_update",t)},expression:"form.is_update"}},[i("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"bugly:",prop:"bugly"}},[i("el-radio-group",{model:{value:e.form.bugly,callback:function(t){e.$set(e.form,"bugly",t)},expression:"form.bugly"}},[i("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1)],1),e._v(" "),i("el-form",{ref:"form3",staticStyle:{"margin-top":"30px"},attrs:{"label-width":"260px"}},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},[],!1,null,"3de232b8",null);u.options.__file="options.vue";t.default=u.exports},LWAO:function(e,t,i){"use strict";var s=i("nisR");i.n(s).a},Ms9V:function(e,t,i){},OXd6:function(e,t,i){"use strict";var s=i("uDfm");i.n(s).a},Z36Z:function(e,t,i){"use strict";var s=i("Ms9V");i.n(s).a},nisR:function(e,t,i){},uDfm:function(e,t,i){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-563f"],{"/yXQ":function(t,e,i){"use strict";var s=i("gDS+"),a=i.n(s),n={name:"UpLoad",props:{index:{required:!0,type:Number},type:{required:!0,type:Number},filelists:{required:!1,type:Array,default:function(){return[]}},singlePic:{required:!1,type:String,default:null},ossparas:{required:!0,type:Object}},data:function(){return{btnText:"点击上传",dialogImageUrl:"",alignSelf:{margin:"83px 0 0 30px"},dialogVisible:!1,fileStorage:[],ossKey:{},mediaDuration:-1,resLoaded:!1,showV:!1,vsource:"",imageUrl:"",fileType:["audio/mp3","video/mp4","image/jpeg,image/png","image/jpeg,image/png"]}},computed:{},updated:function(){if(this.resLoaded){this.resLoaded=!1;var t=document.getElementById("video-active"+this.index),e=this;t.onloadedmetadata=function(){e.$emit("uploadSucess",{mediaDuration:t.duration,index:e.index,type:e.type,res_url:null})}}},mounted:function(){this.ossKey=JSON.parse(a()(this.ossparas)),3===this.type&&null!=this.singlePic&&(this.imageUrl=this.singlePic,this.btnText="替换"),1!==this.type&&0!==this.type||null===this.singlePic||(this.vsource=this.singlePic,this.showV=!0,this.resLoaded=!0,this.btnText="替换")},methods:{handleRemove:function(t,e){var i=this,s=[];e.forEach(function(t,e,a){s.push(i.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1])}),this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:s})},handleAvatarSuccess:function(t,e,i){var s=this;if(console.log(e,i),this.$refs.upload.submit(),this.fileStorage=i,2!==this.type){this.btnText="替换",this.fileStorage=[e];var a=this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1];this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:a})}if(3===this.type&&(this.imageUrl=this.ossparas.host+"/"+this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1]),2!==this.type&&3!==this.type&&(this.showV=!0,this.resLoaded=!0),2===this.type){var n=!0,o=[];i.forEach(function(t,e,i){"success"===t.status?o.push(s.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1]):(n=!1,o=[])}),n&&this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:o})}},beforeAvatarUpload:function(t){2!==this.type&&(this.showV=!1);var e=this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1];this.ossKey.key=e,this.vsource=this.ossparas.host+"/"+this.ossKey.key},handlePictureCardPreview:function(t){this.dialogImageUrl=1===t?this.imageUrl:t.url,this.dialogVisible=!0}}},o=(i("OXd6"),i("Z36Z"),i("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dndList"},[t.imageUrl?i("img",{staticClass:"avatar",staticStyle:{float:"left"},attrs:{src:t.imageUrl},on:{click:function(e){t.handlePictureCardPreview(1)}}}):t._e(),t._v(" "),t.showV?i("video",{staticClass:"video-active",attrs:{id:"video-active"+t.index,width:"320",height:"200",controls:"controls"}},[i("source",{attrs:{src:t.vsource,type:"video/mp4"}})]):t._e(),t._v(" "),i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"show-file-list":2==t.type,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove,"on-preview":t.handlePictureCardPreview,data:t.ossKey,multiple:2==t.type,accept:t.fileType[t.type],action:t.ossparas.host,"file-list":t.filelists,"list-type":2==t.type?"picture-card":""}},[2==t.type?i("i",{staticClass:"el-icon-plus"}):t._e(),t._v(" "),2!==t.type?i("el-button",{style:3!=t.type||null==t.singlePic&&!t.imageUrl?"":t.alignSelf,attrs:{size:"small",type:"success"},domProps:{textContent:t._s(t.btnText)}}):t._e()],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{src:t.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,"0a979296",null);r.options.__file="index.vue";e.a=r.exports},GB9u:function(t,e,i){"use strict";i.r(e);var s=i("gDS+"),a=i.n(s),n=i("UMyc"),o={name:"StypeEdit",components:{UpLoad:i("/yXQ").a},data:function(){return{path:"category",bEdit:!1,formRules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},listLoading:!1,ulParamsMark:!1,formMark:!1,cdn:"https://cdncollege.quansuwangluo.com/",form:{name:"",id:0}}},mounted:function(){var t=this;this.bEdit="0"!==this.$route.params.id,this.bEdit&&this.getInfos(this.$route.params.id),Object(n.j)({type:"dev_test_dcaredata"}).then(function(e){t.ossParams=e.data.datas,t.ulParamsMark=!0,t.listLoading=!1})},methods:{uploadSucess:function(t){null!==t.res_url&&3===t.type&&(this.form.pic=t.res_url)},getInfos:function(t){var e=this;this.listLoading=!0,Object(n.g)(this.path,{id:t}).then(function(t){e.form=t.data.datas,e.listLoading=!1,e.formMark=!0})},onSubmit:function(){var t=this;this.listLoading=!0,Object(n.a)(this.path,this.form).then(function(e){t.$message(e.data.message),t.$store.dispatch("delView",t.$route),t.$router.replace("/college/school_type"),sessionStorage.setItem("refresh",a()(1)),t.listLoading=!1})},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},r=(i("gZ63"),i("KHd+")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"160px"}},[i("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型图片(推荐尺寸:1035 x 360)",prop:"ppt"}},[t.ulParamsMark&&t.formMark?i("up-load",{attrs:{"single-pic":t.bEdit?t.cdn+t.form.pic:t.form.pic,index:-1,type:3,ossparas:t.ossParams},on:{uploadSucess:t.uploadSucess}}):t._e()],1),t._v(" "),i("el-form-item",[t.bEdit?t._e():i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("添加")]),t._v(" "),t.bEdit?i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]):t._e()],1)],1)],1)},[],!1,null,"41bff0fe",null);l.options.__file="options.vue";e.default=l.exports},Ms9V:function(t,e,i){},OXd6:function(t,e,i){"use strict";var s=i("uDfm");i.n(s).a},Z36Z:function(t,e,i){"use strict";var s=i("Ms9V");i.n(s).a},c0Ed:function(t,e,i){},gZ63:function(t,e,i){"use strict";var s=i("c0Ed");i.n(s).a},uDfm:function(t,e,i){}}]);
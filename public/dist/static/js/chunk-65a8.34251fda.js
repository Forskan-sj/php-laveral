(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-65a8"],{"/yXQ":function(e,t,s){"use strict";var a=s("gDS+"),i=s.n(a),r={name:"UpLoad",props:{index:{required:!0,type:Number},type:{required:!0,type:Number},filelists:{required:!1,type:Array,default:function(){return[]}},singlePic:{required:!1,type:String,default:null},ossparas:{required:!0,type:Object}},data:function(){return{btnText:"点击上传",dialogImageUrl:"",alignSelf:{margin:"83px 0 0 30px"},dialogVisible:!1,fileStorage:[],ossKey:{},mediaDuration:-1,resLoaded:!1,showV:!1,vsource:"",imageUrl:"",fileType:["audio/mp3","video/mp4","image/jpeg,image/png","image/jpeg,image/png"]}},computed:{},updated:function(){if(this.resLoaded){this.resLoaded=!1;var e=document.getElementById("video-active"+this.index),t=this;e.onloadedmetadata=function(){t.$emit("uploadSucess",{mediaDuration:e.duration,index:t.index,type:t.type,res_url:null})}}},mounted:function(){this.ossKey=JSON.parse(i()(this.ossparas)),3===this.type&&null!=this.singlePic&&(this.imageUrl=this.singlePic,this.btnText="替换"),1!==this.type&&0!==this.type||null===this.singlePic||(this.vsource=this.singlePic,this.showV=!0,this.resLoaded=!0,this.btnText="替换")},methods:{handleRemove:function(e,t){var s=this,a=[];t.forEach(function(e,t,i){a.push(s.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1])}),this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:a})},handleAvatarSuccess:function(e,t,s){var a=this;if(console.log(t,s),this.$refs.upload.submit(),this.fileStorage=s,2!==this.type){this.btnText="替换",this.fileStorage=[t];var i=this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1];this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:i})}if(3===this.type&&(this.imageUrl=this.ossparas.host+"/"+this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1]),2!==this.type&&3!==this.type&&(this.showV=!0,this.resLoaded=!0),2===this.type){var r=!0,o=[];s.forEach(function(e,t,s){"success"===e.status?o.push(a.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1]):(r=!1,o=[])}),r&&this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:o})}},beforeAvatarUpload:function(e){2!==this.type&&(this.showV=!1);var t=this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1];this.ossKey.key=t,this.vsource=this.ossparas.host+"/"+this.ossKey.key},handlePictureCardPreview:function(e){this.dialogImageUrl=1===e?this.imageUrl:e.url,this.dialogVisible=!0}}},o=(s("OXd6"),s("Z36Z"),s("KHd+")),n=Object(o.a)(r,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dndList"},[e.imageUrl?s("img",{staticClass:"avatar",staticStyle:{float:"left"},attrs:{src:e.imageUrl},on:{click:function(t){e.handlePictureCardPreview(1)}}}):e._e(),e._v(" "),e.showV?s("video",{staticClass:"video-active",attrs:{id:"video-active"+e.index,width:"320",height:"200",controls:"controls"}},[s("source",{attrs:{src:e.vsource,type:"video/mp4"}})]):e._e(),e._v(" "),s("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"show-file-list":2==e.type,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,data:e.ossKey,multiple:2==e.type,accept:e.fileType[e.type],action:e.ossparas.host,"file-list":e.filelists,"list-type":2==e.type?"picture-card":""}},[2==e.type?s("i",{staticClass:"el-icon-plus"}):e._e(),e._v(" "),2!==e.type?s("el-button",{style:3!=e.type||null==e.singlePic&&!e.imageUrl?"":e.alignSelf,attrs:{size:"small",type:"success"},domProps:{textContent:e._s(e.btnText)}}):e._e()],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,"0a979296",null);n.options.__file="index.vue";t.a=n.exports},C5R6:function(e,t,s){},Ms9V:function(e,t,s){},OXd6:function(e,t,s){"use strict";var a=s("uDfm");s.n(a).a},Sa8w:function(e,t,s){"use strict";s.r(t);var a=s("gDS+"),i=s.n(a),r=s("UMyc"),o={name:"TeacherEdit",components:{UpLoad:s("/yXQ").a},data:function(){return{path:"teacher",bEdit:!1,ossParams:{},ulParamsMark:!1,formMark:!0,cdn:"https://cdncollege.quansuwangluo.com/",form:{name:"",desc:"",tag:"",id:0,sex:2},formRules:{name:[{required:!0,message:"请输入讲师名称",trigger:"blur"}],avatar:[{required:!0,message:"请上传讲师头像",trigger:"change"}]}}},mounted:function(){var e=this;this.bEdit="0"!==this.$route.params.id,this.bEdit&&this.getInfos(this.$route.params.id),this.listLoading=!0,Object(r.j)({type:"dev_test_dcaredata"}).then(function(t){e.ossParams=t.data.datas,e.ulParamsMark=!0,e.listLoading=!1})},methods:{uploadSucess:function(e){this.form.avatar=e.res_url},getInfos:function(e){var t=this;this.listLoading=!0,this.formMark=!1,Object(r.g)(this.path,{id:e}).then(function(e){t.form=e.data.datas,console.log(e),t.listLoading=!1,t.formMark=!0})},onSubmit:function(){var e=this;this.listLoading=!0,Object(r.a)(this.path,this.form).then(function(t){e.$message(t.data.message),e.$store.dispatch("delView",e.$route),e.$router.replace("/college/teacher"),sessionStorage.setItem("refresh",i()(1)),e.listLoading=!1})},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},n=(s("tsTI"),s("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"260px"}},[s("el-form-item",{attrs:{label:"讲师名称",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"讲师照片(推荐尺寸:480 x 480)",prop:"avatar"}},[e.ulParamsMark&&e.formMark?s("up-load",{attrs:{index:0,type:3,"single-pic":e.bEdit?e.cdn+e.form.avatar:e.form.avatar,ossparas:e.ossParams},on:{uploadSucess:e.uploadSucess}}):e._e()],1),e._v(" "),s("el-form-item",{attrs:{label:"讲师性别",prop:"sex"}},[s("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"讲师描述",prop:"desc"}},[s("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"讲师标签(以“;”分割)",prop:"tag"}},[s("el-input",{model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),e._v(" "),s("el-form-item",[e.bEdit?e._e():s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")]),e._v(" "),e.bEdit?s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]):e._e()],1)],1)],1)},[],!1,null,"cdbd8882",null);l.options.__file="options.vue";t.default=l.exports},Z36Z:function(e,t,s){"use strict";var a=s("Ms9V");s.n(a).a},tsTI:function(e,t,s){"use strict";var a=s("C5R6");s.n(a).a},uDfm:function(e,t,s){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b224"],{"/yXQ":function(t,e,i){"use strict";var s=i("gDS+"),a=i.n(s),n={name:"UpLoad",props:{index:{required:!0,type:Number},type:{required:!0,type:Number},filelists:{required:!1,type:Array,default:function(){return[]}},singlePic:{required:!1,type:String,default:null},ossparas:{required:!0,type:Object}},data:function(){return{btnText:"点击上传",dialogImageUrl:"",alignSelf:{margin:"83px 0 0 30px"},dialogVisible:!1,fileStorage:[],ossKey:{},mediaDuration:-1,resLoaded:!1,showV:!1,vsource:"",imageUrl:"",fileType:["audio/mp3","video/mp4","image/jpeg,image/png","image/jpeg,image/png"]}},computed:{},updated:function(){if(this.resLoaded){this.resLoaded=!1;var t=document.getElementById("video-active"+this.index),e=this;t.onloadedmetadata=function(){e.$emit("uploadSucess",{mediaDuration:t.duration,index:e.index,type:e.type,res_url:null})}}},mounted:function(){this.ossKey=JSON.parse(a()(this.ossparas)),3===this.type&&null!=this.singlePic&&(this.imageUrl=this.singlePic,this.btnText="替换"),1!==this.type&&0!==this.type||null===this.singlePic||(this.vsource=this.singlePic,this.showV=!0,this.resLoaded=!0,this.btnText="替换")},methods:{handleRemove:function(t,e){var i=this,s=[];e.forEach(function(t,e,a){s.push(i.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1])}),this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:s})},handleAvatarSuccess:function(t,e,i){var s=this;if(console.log(e,i),this.$refs.upload.submit(),this.fileStorage=i,2!==this.type){this.btnText="替换",this.fileStorage=[e];var a=this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1];this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:a})}if(3===this.type&&(this.imageUrl=this.ossparas.host+"/"+this.ossparas.key+"data"+e.uid+"."+e.name.split(".")[e.name.split(".").length-1]),2!==this.type&&3!==this.type&&(this.showV=!0,this.resLoaded=!0),2===this.type){var n=!0,o=[];i.forEach(function(t,e,i){"success"===t.status?o.push(s.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1]):(n=!1,o=[])}),n&&this.$emit("uploadSucess",{mediaDuration:this.mediaDuration,index:this.index,type:this.type,res_url:o})}},beforeAvatarUpload:function(t){2!==this.type&&(this.showV=!1);var e=this.ossparas.key+"data"+t.uid+"."+t.name.split(".")[t.name.split(".").length-1];this.ossKey.key=e,this.vsource=this.ossparas.host+"/"+this.ossKey.key},handlePictureCardPreview:function(t){this.dialogImageUrl=1===t?this.imageUrl:t.url,this.dialogVisible=!0}}},o=(i("OXd6"),i("Z36Z"),i("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dndList"},[t.imageUrl?i("img",{staticClass:"avatar",staticStyle:{float:"left"},attrs:{src:t.imageUrl},on:{click:function(e){t.handlePictureCardPreview(1)}}}):t._e(),t._v(" "),t.showV?i("video",{staticClass:"video-active",attrs:{id:"video-active"+t.index,width:"320",height:"200",controls:"controls"}},[i("source",{attrs:{src:t.vsource,type:"video/mp4"}})]):t._e(),t._v(" "),i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"show-file-list":2==t.type,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove,"on-preview":t.handlePictureCardPreview,data:t.ossKey,multiple:2==t.type,accept:t.fileType[t.type],action:t.ossparas.host,"file-list":t.filelists,"list-type":2==t.type?"picture-card":""}},[2==t.type?i("i",{staticClass:"el-icon-plus"}):t._e(),t._v(" "),2!==t.type?i("el-button",{style:3!=t.type||null==t.singlePic&&!t.imageUrl?"":t.alignSelf,attrs:{size:"small",type:"success"},domProps:{textContent:t._s(t.btnText)}}):t._e()],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{src:t.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,"0a979296",null);r.options.__file="index.vue";e.a=r.exports},JLvQ:function(t,e,i){},Ms9V:function(t,e,i){},OXd6:function(t,e,i){"use strict";var s=i("uDfm");i.n(s).a},SAlv:function(t,e,i){"use strict";var s=i("JLvQ");i.n(s).a},Z36Z:function(t,e,i){"use strict";var s=i("Ms9V");i.n(s).a},uDfm:function(t,e,i){},ukxQ:function(t,e,i){"use strict";i.r(e);var s=i("/yXQ"),a=i("UMyc"),n={name:"ComplexInvitePosterEdit",components:{UpLoad:s.a},data:function(){return{path:"ads",formMark:!0,ossParams:"",bEdit:!1,ulParamsMark:"",listLoading:!1,cdn:"https://cdncollege.quansuwangluo.com/",form:{contents:[{img_url:null}],dtime:""},formRules:{title:[{required:!0,message:"请输入广告名称",trigger:"blur"}]}}},mounted:function(){var t=this;this.getInfos(2),this.listLoading=!0,Object(a.j)({type:"dev_test_dcaredata"}).then(function(e){t.ossParams=e.data.datas,t.ulParamsMark=!0,t.listLoading=!1})},methods:{delAd:function(t){this.form.contents.splice(t,1)},addOptions:function(){var t={img_url:null,title:"",index:this.form.contents.length+1,des:"",url:"",android_url:"",ios_url:""};this.form.contents.push(t)},uploadSucess:function(t){this.form.contents[t.index].img_url=t.res_url},getInfos:function(t){var e=this;this.listLoading=!0,this.formMark=!1,Object(a.g)(this.path,{id:t}).then(function(t){e.form=t.data.datas,console.log(t),e.formMark=!0,e.listLoading=!1})},onSubmit:function(){var t=this;this.listLoading=!0,Object(a.a)(this.path,this.form).then(function(e){t.$message(e.data.message),t.listLoading=!1})},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},o=(i("SAlv"),i("KHd+")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"160px"}},t._l(t.form.contents,function(e,s){return i("el-form-item",{key:e.index},[i("div",{staticClass:"divContent"},[i("div",{staticClass:"delete",on:{click:function(e){t.delAd(s)}}},[t._v("+")]),t._v(" "),i("div",{staticClass:"title"},[t._v("邀请海报(推荐尺寸:753 x 1263)：")]),t._v(" "),i("div",[t.ulParamsMark&&t.formMark?i("up-load",{attrs:{index:s,type:3,"single-pic":t.cdn+e.img_url,ossparas:t.ossParams},on:{uploadSucess:t.uploadSucess}}):t._e()],1),t._v(" "),i("div",{staticClass:"title",staticStyle:{opacity:"0"}},[t._v("主标题：")])])])})),t._v(" "),i("el-form",{ref:"form3",staticStyle:{"margin-top":"30px"},attrs:{"label-width":"160px"}},[i("el-form-item",[i("el-button",{attrs:{type:"success"},on:{click:t.addOptions}},[t._v("添加邀请海报")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)},[],!1,null,"4c8eda84",null);r.options.__file="options.vue";e.default=r.exports}}]);